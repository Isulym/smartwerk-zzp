<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SmartWerk Tax Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #f8f8f8;
      color: #333;
    }
    h2 {
      margin-top: 40px;
    }
    label {
      display: block;
      margin-top: 15px;
    }
    input, select {
      width: 300px;
      padding: 6px;
      margin-top: 5px;
    }
    .section {
      background: #fff;
      padding: 20px;
      border-radius: 6px;
      box-shadow: 0 0 10px #ddd;
      margin-bottom: 30px;
    }
    #summary {
      background-color: #e6ffe6;
      font-weight: bold;
      padding: 15px;
    }
  </style>
</head>
<body>
  <h1>SmartWerk Tax Calculator</h1>

  <form id="taxForm">
    <div class="section">
      <h2>Step 1: Your Info</h2>
      <label>Company Name <input type="text" name="company" /></label>
      <label>Email / Phone <input type="text" name="contact" /></label>
      <label>Hours Worked <input type="number" name="hoursWorked" required /></label>
      <label>Hourly Rate (‚Ç¨) <input type="number" name="hourlyRate" required /></label>
      <label>KvK Registered?
        <select name="kvk">
          <option value="yes">Yes</option>
          <option value="no">No</option>
        </select>
      </label>
      <label>Worked 1,225+ hours?
        <select name="worked1225">
          <option value="yes">Yes</option>
          <option value="no">No</option>
        </select>
      </label>
    </div>

    <div class="section">
      <h2>Step 2: Expenses</h2>
      <label>Auto Costs (‚Ç¨) <input type="number" name="auto" value="0"/></label>
      <label>Office Costs (‚Ç¨) <input type="number" name="office" value="0"/></label>
      <label>Internet & Phone (‚Ç¨) <input type="number" name="internet" value="0"/></label>
      <label>Marketing (‚Ç¨) <input type="number" name="marketing" value="0"/></label>
      <label>Other Expenses (‚Ç¨) <input type="number" name="other" value="0"/></label>
      <label>Extra Benefits / Subsidies (‚Ç¨) <input type="number" name="benefits" value="0"/></label>
    </div>

    <div class="section">
      <h2>Step 3: Tax Settings</h2>
      <label>BTW Rate
        <select name="btwRate">
          <option value="21">21%</option>
          <option value="9">9%</option>
          <option value="0">0%</option>
        </select>
      </label>
      <label>Use KOR?
        <select name="kor">
          <option value="no">No</option>
          <option value="yes">Yes</option>
        </select>
      </label>
    </div>

    <div class="section">
      <h2>Step 4: Summary</h2>
      <div id="summary">Fill out the form to see your result here.</div>
    </div>

    <button type="button" onclick="calculate()">Calculate Tax</button>
  </form>

  <script>
    function calculate() {
      const form = document.forms.taxForm;
      const hours = parseFloat(form.hoursWorked.value) || 0;
      const rate = parseFloat(form.hourlyRate.value) || 0;
      const gross = hours * rate;

      const expenses = ['auto', 'office', 'internet', 'marketing', 'other'].reduce(
        (sum, name) => sum + (parseFloat(form[name].value) || 0), 0
      );
      const benefits = parseFloat(form.benefits.value) || 0;

      const profitBeforeTax = gross - expenses + benefits;

      let taxDeduction = 0;
      const kvk = form.kvk.value === 'yes';
      const worked1225 = form.worked1225.value === 'yes';

      if (kvk && worked1225) {
        taxDeduction += 2123; // Startersaftrek
      }
      if (profitBeforeTax > 0) {
        taxDeduction += profitBeforeTax * 0.127; // MKB-winstvrijstelling (12.7%)
      }

      const taxableProfit = Math.max(profitBeforeTax - taxDeduction, 0);
      const incomeTax = taxableProfit <= 73000 ? taxableProfit * 0.3748 : 
                         73000 * 0.3748 + (taxableProfit - 73000) * 0.495;

      const btwRate = parseFloat(form.btwRate.value) / 100;
      const kor = form.kor.value === 'yes';
      const btw = kor ? 0 : gross * btwRate;

      const netProfit = profitBeforeTax - incomeTax;

      document.getElementById("summary").innerHTML = `
        üí∞ Gross Income: ‚Ç¨${gross.toFixed(2)}<br>
        üìâ Expenses: ‚Ç¨${expenses.toFixed(2)}<br>
        ‚ûï Benefits: ‚Ç¨${benefits.toFixed(2)}<br>
        üßÆ Profit Before Tax: ‚Ç¨${profitBeforeTax.toFixed(2)}<br>
        üõ°Ô∏è Deductions: ‚Ç¨${taxDeduction.toFixed(2)}<br>
        üí∏ Taxable Profit: ‚Ç¨${taxableProfit.toFixed(2)}<br>
        üßæ Income Tax: ‚Ç¨${incomeTax.toFixed(2)}<br>
        üöö VAT (BTW): ‚Ç¨${btw.toFixed(2)}<br>
        ‚úÖ Final Net Profit: ‚Ç¨${netProfit.toFixed(2)}<br>
      `;
    }
  </script>
</body>
</html>
