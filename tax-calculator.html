<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SmartWerk Tax Calculator v10</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
    h2 { color: #2c3e50; }
    .step { margin-bottom: 30px; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.05); }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, select { width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; }
    .tooltip { font-size: 12px; color: #555; margin-top: 4px; }
    #result { font-weight: bold; font-size: 18px; }
    .summary-box { background: #e8f5e9; padding: 15px; border-radius: 8px; margin-top: 20px; }
  </style>
</head>
<body>

  <h2>ðŸ’¼ SmartWerk Tax Calculator v10</h2>

  <div class="step">
    <h3>Step 1: Your Business Info</h3>
    <label>Company Name:</label>
    <input type="text" id="company">

    <label>Email / Phone:</label>
    <input type="text" id="contact">

    <label>Period:</label>
    <select id="period">
      <option>January â€“ March</option>
      <option>April â€“ June</option>
      <option>July â€“ September</option>
      <option>October â€“ December</option>
    </select>

    <label>Hours worked:</label>
    <input type="number" id="hours" value="0">

    <label>Hourly rate (EUR):</label>
    <input type="number" id="rate" value="0">

    <label>Registered KvK?</label>
    <select id="kvk">
      <option>Yes</option>
      <option>No</option>
    </select>

    <label>Worked 1225+ hours?</label>
    <select id="worked1225">
      <option>Yes</option>
      <option>No</option>
    </select>

    <label>BTW Rate:</label>
    <select id="btw">
      <option value="0">0%</option>
      <option value="9">9%</option>
      <option value="21">21%</option>
    </select>
    <label>Use KOR?</label>
    <select id="kor">
      <option>No</option>
      <option>Yes</option>
    </select>
  </div>

  <div class="step">
    <h3>Step 2: Expenses</h3>
    <label>Car Expenses (â‚¬):</label>
    <input type="number" id="car" value="0">
    <label>Office Expenses (â‚¬):</label>
    <input type="number" id="office" value="0">
    <label>Internet (â‚¬):</label>
    <input type="number" id="internet" value="0">
    <label>Advertising (â‚¬):</label>
    <input type="number" id="ads" value="0">
    <label>Other (â‚¬):</label>
    <input type="number" id="other" value="0">
  </div>

  <div class="step">
    <h3>Step 3: Benefits</h3>
    <label>Extra Benefits (e.g. subsidies, kinderopvang):</label>
    <input type="number" id="benefits" value="0">
  </div>

  <div class="step">
    <h3>Step 4: Summary & Result</h3>
    <div id="result"></div>
    <div class="summary-box" id="summaryBox" style="display:none;"></div>
  </div>

  <script>
    function calculate() {
      const hours = +document.getElementById("hours").value;
      const rate = +document.getElementById("rate").value;
      const kvk = document.getElementById("kvk").value === "Yes";
      const worked1225 = document.getElementById("worked1225").value === "Yes";
      const btwRate = +document.getElementById("btw").value;
      const kor = document.getElementById("kor").value === "Yes";

      const grossIncome = hours * rate;
      const car = +document.getElementById("car").value;
      const office = +document.getElementById("office").value;
      const internet = +document.getElementById("internet").value;
      const ads = +document.getElementById("ads").value;
      const other = +document.getElementById("other").value;
      const benefits = +document.getElementById("benefits").value;

      const expenses = car + office + internet + ads + other;
      let taxableIncome = grossIncome + benefits - expenses;

      let deductions = 0;
      if (kvk && worked1225) {
        deductions += 2123; // Startersaftrek
        deductions += 5030; // Zelfstandigenaftrek
      }

      const profitAfterDeductions = taxableIncome - deductions;
      const mkbWinstVrijstelling = 0.127 * Math.max(0, profitAfterDeductions);
      const finalTaxBase = profitAfterDeductions - mkbWinstVrijstelling;

      // Income tax
      let incomeTax = 0;
      if (finalTaxBase <= 37981) incomeTax = finalTaxBase * 0.095;
      else if (finalTaxBase <= 73971) incomeTax = 37981 * 0.095 + (finalTaxBase - 37981) * 0.3735;
      else incomeTax = 37981 * 0.095 + (73971 - 37981) * 0.3735 + (finalTaxBase - 73971) * 0.495;

      const zvw = 0.0532 * Math.min(finalTaxBase, 67000);
      const btw = kor ? 0 : (btwRate / 100 * grossIncome);

      const totalTax = incomeTax + zvw + btw;

      const summary = `
        ðŸ’° Gross Income: â‚¬${grossIncome.toFixed(2)}<br>
        ðŸ’¸ Expenses: â‚¬${expenses.toFixed(2)}<br>
        ðŸ§¾ Taxable Income: â‚¬${taxableIncome.toFixed(2)}<br>
        ðŸ“‰ Deductions: â‚¬${deductions.toFixed(2)}<br>
        ðŸ”» Profit After Deductions: â‚¬${profitAfterDeductions.toFixed(2)}<br>
        ðŸ§® MKB Winstvrijstelling (12.7%): â‚¬${mkbWinstVrijstelling.toFixed(2)}<br>
        ðŸ§¾ Final Tax Base: â‚¬${finalTaxBase.toFixed(2)}<br><br>
        ðŸ’¼ Income Tax: â‚¬${incomeTax.toFixed(2)}<br>
        ðŸ’¡ ZVW (5.32%): â‚¬${zvw.toFixed(2)}<br>
        ðŸ’¶ BTW (${btwRate}%): â‚¬${btw.toFixed(2)}<br><br>
        ðŸŸ¢ <strong>Total Tax: â‚¬${totalTax.toFixed(2)}</strong><br><br>
        âœ… <strong>You saved â‚¬${deductions.toFixed(2)} with ZZP deductions</strong>
      `;

      document.getElementById("result").innerHTML = "";
      document.getElementById("summaryBox").innerHTML = summary;
      document.getElementById("summaryBox").style.display = "block";
    }

    const inputs = document.querySelectorAll("input, select");
    inputs.forEach(i => i.addEventListener("input", calculate));
    window.onload = calculate;
  </script>

</body>
</html>
