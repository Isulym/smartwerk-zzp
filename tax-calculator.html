
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SmartWerk Tax Calculator</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2em;
      background: #f9f9f9;
    }
    h2, h3 {
      color: #333;
    }
    section {
      background: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
    }
    input, select {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
    }
    .button-group {
      margin-top: 15px;
    }
    .button-group button {
      margin-right: 10px;
      padding: 10px 15px;
    }
    .summary {
      background: #eafbe5;
    }
  </style>
</head>
<body>
  <h2>SmartWerk Tax Calculator</h2>

  <div class="section">
    <h3>Step 1: Your Data</h3>
    <label>Company Name:</label><input type="text" id="companyName"/>
    <label>Email / Phone:</label><input type="text" id="contactInfo"/>
    <label>Period:</label>
    <select id="period">
      <option value="Q1">January ‚Äì March (Q1)</option>
      <option value="Q2">April ‚Äì June (Q2)</option>
      <option value="Q3">July ‚Äì September (Q3)</option>
      <option value="Q4">October ‚Äì December (Q4)</option>
    </select>
    <label>Hours Worked:</label><input type="number" id="hoursWorked" oninput="autoCalcIncome()"/>
    <label>Hourly Rate (EUR):</label><input type="number" id="hourlyRate" oninput="autoCalcIncome()"/>
    <label>Total Income (auto):</label><input type="number" id="income" readonly/>
  </div>

  <div class="section">
    <h3>Step 2: Expenses</h3>
    <label>Vehicle Expenses:</label><input type="number" id="vehicle"/>
    <label>Office Expenses:</label><input type="number" id="office"/>
    <label>Internet Expenses:</label><input type="number" id="internet"/>
    <label>Marketing Expenses:</label><input type="number" id="marketing"/>
    <label>Other Expenses:</label><input type="number" id="other"/>
    <label>Extra Benefits (EUR):</label><input type="number" id="extraBenefits"/>
  </div>

  <div class="section">
    <h3>Step 3: Tax Options</h3>
    <label>KvK Registered?</label>
    <select id="kvk" onchange="calculateAutomatically()">
      <option value="yes">Yes</option>
      <option value="no">No</option>
    </select>
    <label>Worked 1,225+ hours?</label>
    <select id="zzpHours" onchange="calculateAutomatically()">
      <option value="yes">Yes</option>
      <option value="no">No</option>
    </select>
    <label>BTW Rate:</label>
    <select id="btw" onchange="calculateAutomatically()">
      <option value="21">21%</option>
      <option value="9">9%</option>
      <option value="0">0%</option>
    </select>
    <label>Use KOR?</label>
    <select id="kor" onchange="calculateAutomatically()">
      <option value="no">No</option>
      <option value="yes">Yes</option>
    </select>
  </div>

  <div class="section summary">
    <h3>Step 4: Result</h3>
    <div id="result">
     <p><strong>Gross Income:</strong> <span id="grossIncome"></span></p>

<p><strong>Total Expenses:</strong> <span id="totalExpenses"></span></p>

<p><strong>Taxable Profit:</strong> <span id="taxableProfit" title="Gross income minus expenses"></span></p>

<p><strong>ZZP Deductions:</strong> <span id="zzpDeductions" title="ZZP deductions (Zelfstandigenaftrek + Startersaftrek if eligible)"></span></p>

<p><strong>MKB Exemption (12.7%):</strong> <span id="mkbVrijstelling" title="MKB exemption: 12.7% after all deductions"></span></p>

<p><strong>Final Taxable Income:</strong> <span id="finalTaxable" title="Income after deductions and exemptions"></span></p>

<p><strong>Income Tax (19% / 25.8%):</strong>
  <span id="incomeTax" title="Calculated based on Dutch progressive income tax rates"></span>
  <span title="Progressive: 19% to ‚Ç¨200K, 25.8% above">‚ÑπÔ∏è</span>
</p>

<p><strong>ZVW (5.32%):</strong>
  <span id="zvwAmount" title="Mandatory health insurance contribution (ZVW)"></span>
  <span title="Health contribution (Zorgverzekeringswet)">‚ÑπÔ∏è</span>
</p>

<p><strong>BTW Amount:</strong>
  <span id="btwAmount" title="Calculated VAT amount based on rate and KOR status"></span>
  <span title="Based on selected BTW rate and KOR">‚ÑπÔ∏è</span>
</p>

<p><strong>Total Estimated Tax:</strong>
  <span id="totalTax" title="Income Tax + ZVW - benefits from deductions"></span>
</p>

      <p <style>
  .highlight-positive {
    color: green;
    font-weight: bold;
  }

  .highlight-negative {
    color: red;
    font-weight: bold;
  }

  .result-block {
    padding: 8px 0;
    border-bottom: 1px dashed #ccc;
  }

  .result-label {
    display: inline-block;
    width: 180px;
  }

  .result-icon {
    margin-right: 4px;
  }
</style>

      <hr/>
      
    </div>
  </div>
<<div id="deductionBreakdown">
  <h4>üí° Deduction Breakdown</h4>
  <ul>
  <li id="line-zzp">‚úÖ Zelfstandigenaftrek (‚Ç¨5,030) <span id="zzp-status" title="Applied if KvK is Yes and 1225+ hours worked">eligible</span></li>
  <li id="line-starter">‚úÖ Startersaftrek (‚Ç¨2,123) <span id="starter-status" title="Only applies for first 3 years">eligible</span></li>
  <li id="line-mkb">‚úÖ MKB-vrijstelling (12.7%) <span id="mkb-status" title="Applied after all other deductions">applied</span></li>
  <li id="line-kor">‚úÖ KOR <span id="kor-status" title="Applied if turnover < ‚Ç¨20,000 and selected Yes">applied</span></li>
</ul>
</div>
  <div class="button-group">
    <button onclick="calculateTax()">üßÆ Calculate Tax</button>
    <button onclick="alert('Export to PDF coming soon!')">üìÑ Export PDF</button>
    <button onclick="alert('Ask AI coming soon!')">ü§ñ Ask SmartWerk AI</button>
  </div>

  <script>
    function autoCalcIncome() {
      const h = +document.getElementById("hoursWorked").value || 0;
      const r = +document.getElementById("hourlyRate").value || 0;
      document.getElementById("income").value = h * r;
      calculateAutomatically();
    }

    function calculateAutomatically() {
      if (typeof calculateTax === "function") {
        calculateTax();
      }
    }

    function calculateTax() {
      const income = +document.getElementById("income").value || 0;
      const btwRate = +document.getElementById("btw").value / 100;
      const vehicle = +document.getElementById("vehicle").value || 0;
      const office = +document.getElementById("office").value || 0;
      const internet = +document.getElementById("internet").value || 0;
      const marketing = +document.getElementById("marketing").value || 0;
      const other = +document.getElementById("other").value || 0;
      const extraBenefits = +document.getElementById("extraBenefits").value || 0;
      const kvk = document.getElementById("kvk").value === "yes";
      const zzp = document.getElementById("zzpHours").value === "yes";
      const kor = document.getElementById("kor").value === "yes";

      const totalExpenses = vehicle + office + internet + marketing + other;
      const profit = income - totalExpenses + extraBenefits;
      
const btwAmount = kor ? 0 : profit * (btwRate / 100);
document.getElementById("btwAmount").textContent = btwAmount.toFixed(2);

      let deductions = 0;
      if (kvk && zzp) {
        deductions += 5030;
        deductions += 2123;
      }

      let taxable = Math.max(0, profit - deductions);
      const mkbVrijstelling = taxable * 0.127;
      taxable -= mkbVrijstelling;

const cappedDeduction = Math.min(deductions, taxable * 0.3748);
const cappedMkb = Math.min(mkbVrijstelling, (taxable - cappedDeduction) * 0.3748);
const totalSaved = cappedDeduction + cappedMkb;

const baseTax = (taxable - totalSaved) * 0.19;
if (taxable >= 200000) {
  const extraTax = (taxable - 200000 - totalSaved) * 0.258;
  incomeTax = Math.max(0, baseTax + (extraTax > 0 ? extraTax : 0));
} else {
  incomeTax = baseTax > 0 ? baseTax : 0;
}      const zvw = profit * 0.0532;
      if (kor) incomeTax -= 8;

      const totalTax = incomeTax + zvw;
      const cappedDeduction = Math.min(deductions, taxable * 0.3748);
      const cappedMkb = Math.min(mkbVrijstelling, (taxable - cappedDeduction) * 0.3748);
      const totalSaved = cappedDeduction + cappedMkb;
      const profitElement = document.getElementById("taxableProfit");
profitElement.textContent = profit.toFixed(2);
profitElement.className = profit > 0 ? 'highlight-positive' : 'highlight-negative';

const taxElement = document.getElementById("incomeTax");
taxElement.textContent = incomeTax.toFixed(2);
taxElement.className = incomeTax > 0 ? 'highlight-negative' : 'highlight-positive';

const savedElement = document.getElementById("youSaved");
savedElement.textContent = totalSaved.toFixed(2);
savedElement.className = totalSaved > 0 ? 'highlight-positive' : 'highlight-negative';

      document.getElementById("grossIncome").textContent = income.toFixed(2);
      document.getElementById("totalExpenses").textContent = totalExpenses.toFixed(2);
      document.getElementById("zzpDeductions").textContent = deductions.toFixed(2);
      document.getElementById("mkbVrijstelling").textContent = mkbVrijstelling.toFixed(2);
      document.getElementById("finalTaxable").textContent = taxable.toFixed(2);
      document.getElementById("zvwAmount").textContent = zvw.toFixed(2);
      document.getElementById("btwAmount").textContent = (profit * btwRate).toFixed(2);
      document.getElementById("totalTax").textContent = totalTax.toFixed(2);
      document.getElementById("line-zzp").textContent = deductions >= 5030
      document.getElementById("zzp-status").textContent = (kvk && zzp) ? "eligible ‚úÖ" : "not eligible ‚ùå";
      document.getElementById("starter-status").textContent = (kvk && zzp) ? "eligible ‚úÖ" : "not eligible ‚ùå";
      document.getElementById("mkb-status").textContent = mkbVrijstelling > 0 ? "applied ‚úÖ" : "not eligible ‚ùå";
      document.getElementById("kor-status").textContent = kor ? "applied ‚úÖ" : "not used ‚ùå";
  ? "‚úÖ Zelfstandigenaftrek: ‚Ç¨5,030"
  : "‚ùå Zelfstandigenaftrek: not eligible";

document.getElementById("line-starter").textContent = deductions >= 7153
  ? "‚úÖ Startersaftrek: ‚Ç¨2,123"
  : "‚ùå Startersaftrek: not eligible";

document.getElementById("line-mkb").textContent = mkbVrijstelling > 0
  ? `‚úÖ MKB-vrijstelling: 12.7%`
  : "‚ùå MKB-vrijstelling: not eligible";

document.getElementById("line-kor").textContent = kor
  ? "‚úÖ KOR: applied (no VAT due)"
  : "‚ùå KOR: not used";
    }
  </script>
</body>
</html>
