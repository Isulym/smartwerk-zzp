<!-- âœ… Ğ”ĞĞŸĞĞ’ĞĞ•ĞĞ˜Ğ™ Ğ¤ĞĞ™Ğ›: contract.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“ƒ Freelance Contract - SmartWerk</title>
  <link rel="stylesheet" href="style-contract.css">
</head>
<body>
  <div class="wrap">
    <header class="topbar">
      <a class="brand" href="templates.html">ğŸ“ƒ Freelance Contract (NL/EN)</a>
      <nav class="right">
        <a href="dashboard.html" class="btn">â† Back to Dashboard</a>
      </nav>
    </header>

    <section class="intro">
      <h1>ğŸ“ƒ Create Freelance Contract</h1>
      <p class="muted">Fill out the details below to generate a professional freelance contract. You can export it as PDF or DOCX, and use AI to help complete it.</p>
    </section>

    <form id="contractForm">
      <div class="form-section">
        <h2>ğŸ““ Language</h2>
        <select id="languageSwitcher">
          <option value="en">English</option>
          <option value="nl">Nederlands</option>
        </select>
      </div>

      <div class="form-section">
        <h2>ğŸ’¾ Preview & Content</h2>
        <textarea id="contractText" rows="14" placeholder="Contract will appear here..." required></textarea>
      </div>

      <div class="form-section">
        <h2>ğŸ“œ Project Info</h2>
        <input type="text" id="businessName" placeholder="Your Business Name" required />
        <input type="text" id="clientName" placeholder="Client Name" required />
        <textarea id="projectDesc" placeholder="Describe the project..."></textarea>
        <input type="text" id="projectFee" placeholder="Project Fee (e.g. 1000 EUR)" />
        <input type="text" id="projectDeadline" placeholder="Deadline" />
      </div>

      <div class="form-section">
        <h2>âœï¸ Signature</h2>
        <input type="text" id="signatureName" placeholder="Your Name" required />
        <input type="date" id="contractDate" required />
      </div>

      <div class="actions">
        <button type="button" class="btn ghost" id="aiFillBtn">ğŸ¤– AI Fill</button>
        <button type="button" class="btn" id="saveBtn">ğŸ“‚ Save</button>
        <button type="button" class="btn primary" id="exportBtn">ğŸ“„ Export as TXT</button>
        <button type="submit" class="btn primary" id="downloadPDFBtn">ğŸ” Export as PDF</button>
        <button type="button" class="btn ghost" id="downloadDOCXBtn">Download DOCX</button>
      </div>
    </form>

    <footer class="foot-note">
      <p class="muted">Generated with SmartWerk â€” smartwerk.nl</p>
    </footer>
  </div>

   <script>

   // âœ… SmartWerk Freelance Contract â€” FULL JS FILE

import { saveAs } from "https://cdn.jsdelivr.net/npm/file-saver@2.0.5/+esm";
import { Document, Packer, Paragraph, TextRun, HeadingLevel } from "https://cdn.jsdelivr.net/npm/docx@7.7.0/+esm";

// PDF libraries
import jsPDF from "https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js";

// DOM Loaded
document.addEventListener("DOMContentLoaded", () => {
  const validUntil = new Date();
  validUntil.setDate(validUntil.getDate() + 14);
  const formattedDate = validUntil.toLocaleDateString();

  const contractForm = document.getElementById("contractForm");
  const aiFillBtn = document.getElementById("aiFillBtn");
  const downloadPDFBtn = document.getElementById("downloadPDFBtn");
  const downloadDOCXBtn = document.getElementById("downloadDOCXBtn");

  aiFillBtn.addEventListener("click", () => {
    document.getElementById("projectDescription").value = `Design and deliver a responsive website including homepage, services page, and contact form.`;
    document.getElementById("timeline").value = `Start: ${new Date().toLocaleDateString()}, Delivery: ${formattedDate}`;
    document.getElementById("rate").value = "â‚¬1500";
    document.getElementById("paymentTerms").value = "50% upfront, 50% after delivery";
    document.getElementById("terminationClause").value = "Either party may terminate this agreement with 7 days written notice.";
    document.getElementById("jurisdiction").value = "This contract is governed by the laws of the Netherlands.";
  });

  downloadPDFBtn.addEventListener("click", generateContractPDF);
  downloadDOCXBtn.addEventListener("click", exportContractAsDOCX);

  contractForm.addEventListener("submit", function (e) {
    e.preventDefault();
    saveContract();
    generateContractPDF();
  });
});

// ğŸ”’ Save contract to localStorage
function saveContract() {
  const contract = getContractData();
  const saved = JSON.parse(localStorage.getItem("savedContracts") || "[]");
  saved.push(contract);
  localStorage.setItem("savedContracts", JSON.stringify(saved));
  alert("âœ… Contract saved to localStorage!");
}

// ğŸ“„ Get all form data
function getContractData() {
  const get = (id) => document.getElementById(id)?.value || "-";
  return {
    businessName: get("businessName"),
    businessKvK: get("businessKvK"),
    businessVAT: get("businessVAT"),
    businessIBAN: get("businessIBAN"),
    clientName: get("clientName"),
    clientAddress: get("clientAddress"),
    projectDescription: get("projectDescription"),
    timeline: get("timeline"),
    rate: get("rate"),
    paymentTerms: get("paymentTerms"),
    terminationClause: get("terminationClause"),
    jurisdiction: get("jurisdiction"),
    signatureName: get("signatureName"),
    contractDate: get("contractDate") || new Date().toISOString().slice(0, 10),
  };
}

// ğŸ“„ Generate PDF
function generateContractPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const data = getContractData();
  let y = 20;

  function addSection(title, content) {
    doc.setFontSize(14);
    doc.setFont(undefined, "bold");
    doc.text(title, 14, y);
    y += 6;
    doc.setFontSize(12);
    doc.setFont(undefined, "normal");
    const splitText = doc.splitTextToSize(content, 180);
    doc.text(splitText, 14, y);
    y += splitText.length * 6 + 4;
  }

  doc.setFontSize(18);
  doc.text("ğŸ“ƒ Freelance Contract", 14, y);
  y += 10;

  addSection("ğŸ§¾ Business Info", `Name: ${data.businessName}\nKvK: ${data.businessKvK}\nVAT: ${data.businessVAT}\nIBAN: ${data.businessIBAN}`);
  addSection("ğŸ‘¤ Client Info", `Name: ${data.clientName}\nAddress: ${data.clientAddress}`);
  addSection("ğŸ“‹ Project Description", data.projectDescription);
  addSection("ğŸ“… Timeline", data.timeline);
  addSection("ğŸ’¶ Payment Terms", `Rate: ${data.rate}\nTerms: ${data.paymentTerms}`);
  addSection("âš–ï¸ Legal", `Termination: ${data.terminationClause}\nJurisdiction: ${data.jurisdiction}`);
  addSection("âœï¸ Signature", `Name: ${data.signatureName}\nDate: ${data.contractDate}`);

  doc.setFontSize(10);
  doc.setTextColor(150);
  doc.text("Generated with SmartWerk â€” smartwerk.nl", 14, 290);
  doc.save(`Contract-${data.clientName || "Client"}.pdf`);
}

// ğŸ“„ Generate DOCX
function exportContractAsDOCX() {
  const data = getContractData();
  const doc = new Document({
    sections: [
      {
        children: [
          new Paragraph({
            text: "ğŸ“ƒ Freelance Contract",
            heading: HeadingLevel.TITLE,
          }),
          new Paragraph({
            text: `Generated by SmartWerk on ${data.contractDate}`,
            spacing: { after: 300 },
          }),
          ...section("ğŸ§¾ Business Info", [
            `Name: ${data.businessName}`,
            `KvK: ${data.businessKvK}`,
            `VAT: ${data.businessVAT}`,
            `IBAN: ${data.businessIBAN}`,
          ]),
          ...section("ğŸ‘¤ Client Info", [
            `Name: ${data.clientName}`,
            `Address: ${data.clientAddress}`,
          ]),
          ...section("ğŸ“‹ Project Details", [
            `Description: ${data.projectDescription}`,
            `Timeline: ${data.timeline}`,
          ]),
          ...section("ğŸ’¶ Payment Terms", [
            `Rate: ${data.rate}`,
            `Terms: ${data.paymentTerms}`,
          ]),
          ...section("âš–ï¸ Legal", [
            `Termination Clause: ${data.terminationClause}`,
            `Jurisdiction: ${data.jurisdiction}`,
          ]),
          ...section("âœï¸ Signature", [
            `Signed by: ${data.signatureName}`,
            `Date: ${data.contractDate}`,
          ]),
          new Paragraph({
            text: "Generated with SmartWerk â€” smartwerk.nl",
            spacing: { before: 300 },
            style: "footer",
          }),
        ],
      },
    ],
  });

  Packer.toBlob(doc).then((blob) => {
    saveAs(blob, `SmartWerk-Contract-${data.clientName || "Client"}.docx`);
  });
}

function section(title, lines) {
  return [
    new Paragraph({
      text: title,
      heading: HeadingLevel.HEADING_2,
      spacing: { after: 100 },
    }),
    ...lines.map((line) =>
      new Paragraph({
        children: [new TextRun(line)],
        spacing: { after: 100 },
      })
    ),
  ];
}
     
   </script>

  <script type="module" src="contract.js"></script>
  <script type="module" src="contract-pdf.js"></script>
  <script type="module" src="contract-docx.js"></script>

  
</body>
</html>

