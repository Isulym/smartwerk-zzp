<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“¬ Payment Reminder - SmartWerk</title>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ“¬ Payment Reminder</h1>
      <p class="muted">Send professional reminders for unpaid invoices. Use AI assistance, export to PDF, or send by email.</p>
    </header>

    <!-- 1. Business Info -->
    <section>
      <h2>ğŸ§¾ Business Info (From)</h2>
      <input type="text" id="businessName" placeholder="Business Name">
      <input type="text" id="senderName" placeholder="Your Name">
      <input type="email" id="senderEmail" placeholder="Your Email">
      <input type="text" id="senderIBAN" placeholder="IBAN">
      <input type="text" id="senderAddress" placeholder="Address">
    </section>

    <!-- 2. Client Info -->
    <section>
      <h2>ğŸ‘¤ Client Info (To)</h2>
      <input type="text" id="clientName" placeholder="Client Name">
      <input type="email" id="clientEmail" placeholder="Client Email">
      <input type="text" id="clientAddress" placeholder="Client Address">
    </section>

    <!-- 3. Invoice Details -->
    <section>
      <h2>ğŸ“„ Invoice Details</h2>
      <input type="text" id="invoiceNumber" placeholder="Invoice Number">
      <input type="date" id="invoiceDate" placeholder="Invoice Date">
      <input type="date" id="dueDate" placeholder="Due Date">
      <input type="number" id="amountDue" placeholder="Amount Due (â‚¬)">
    </section>

    <!-- 4. Status & Countdown -->
    <section>
      <h2>ğŸ¯ Reminder Type</h2>
      <select id="reminderStatus">
        <option value="first">â³ First Reminder</option>
        <option value="second">âš ï¸ Second Notice</option>
        <option value="final">â— Final Reminder</option>
      </select>
      <p id="countdownNotice"></p>
    </section>

    <!-- 5. Body Message -->
    <section>
      <h2>ğŸ’¬ Message Body</h2>
      <textarea id="messageBody" placeholder="Message to the client..."></textarea>
      <div class="tone-controls">
        <button id="makeStrict">ğŸ§  Make it more strict</button>
        <button id="makeFriendly">ğŸ¤ Make it more friendly</button>
      </div>
    </section>

    <!-- 6. Date & Location -->
    <section>
      <h2>ğŸ“… Date & Location</h2>
      <input type="text" id="city" placeholder="City">
      <input type="date" id="currentDate">
    </section>

    <!-- 7. Signature -->
    <section>
      <h2>âœï¸ Signature</h2>
      <input type="text" id="signatureName" placeholder="Your Full Name">
      <input type="text" id="signatureRole" placeholder="Position (optional)">
      <input type="text" id="signatureContact" placeholder="Phone or Email (optional)">
    </section>

    <!-- 8. Payment Link -->
    <section>
      <h2>ğŸ’³ Payment</h2>
      <input type="url" id="paymentLink" placeholder="Payment Link (PayPal, Mollie, etc.)">
      <button id="payNowBtn">ğŸ’³ Pay Now</button>
    </section>

    <!-- 9. Attach Invoice -->
    <section>
      <h2>ğŸ“¥ Attach Original Invoice</h2>
      <input type="file" id="invoiceFile">
      <p id="attachedFileName"></p>
    </section>

    <!-- ACTION BUTTONS -->
    <section class="actions">
      <button id="aiFill">ğŸ¤– AI Fill</button>
      <button id="loadExample">ğŸ“‚ Load Example</button>
      <button id="translate">ğŸŒ Translate</button>
      <button id="saveReminder">ğŸ’¾ Save</button>
      <button id="savedReminders">ğŸ“¬ Saved Reminders</button>
      <button id="previewEmail">ğŸ” Preview</button>
      <button id="printReminder">ğŸ–¨ï¸ Print</button>
      <button id="sendEmail">ğŸ“¤ Send via Email</button>
      <button id="exportPDF">ğŸ“„ Export as PDF</button>
    </section>

    <!-- Footer -->
    <footer>
      <p class="muted">SmartWerk â€” smartwerk.nl | PRO features available</p>
    </footer>
  </div>

  <script>


    // payment-reminder.js â€” SmartWerk

document.addEventListener("DOMContentLoaded", () => {
  const elements = {
    businessName: document.getElementById("businessName"),
    senderName: document.getElementById("senderName"),
    senderEmail: document.getElementById("senderEmail"),
    businessIBAN: document.getElementById("businessIBAN"),
    businessAddress: document.getElementById("businessAddress"),
    clientName: document.getElementById("clientName"),
    clientEmail: document.getElementById("clientEmail"),
    clientAddress: document.getElementById("clientAddress"),
    invoiceNumber: document.getElementById("invoiceNumber"),
    invoiceDate: document.getElementById("invoiceDate"),
    dueDate: document.getElementById("dueDate"),
    amountDue: document.getElementById("amountDue"),
    messageBody: document.getElementById("messageBody"),
    todayDate: document.getElementById("todayDate"),
    city: document.getElementById("city"),
    signatureName: document.getElementById("signatureName"),
    signaturePosition: document.getElementById("signaturePosition"),
    signatureContact: document.getElementById("signatureContact"),
    paymentLink: document.getElementById("paymentLink"),
    attachedInvoice: document.getElementById("attachedInvoice"),
    status: document.getElementById("reminderStatus"),
    countdownText: document.getElementById("countdown"),
  };

  // Set today's date
  elements.todayDate.value = new Date().toISOString().slice(0, 10);

  // Countdown logic
  function updateCountdown() {
    const due = new Date(elements.dueDate.value);
    const today = new Date();
    const diffDays = Math.ceil((due - today) / (1000 * 60 * 60 * 24));

    if (!isNaN(diffDays)) {
      if (diffDays < 0) {
        elements.countdownText.textContent = `âš ï¸ This invoice is overdue by ${Math.abs(diffDays)} day(s).`;
      } else if (diffDays === 0) {
        elements.countdownText.textContent = `â³ This invoice is due today.`;
      } else {
        elements.countdownText.textContent = `ğŸ’¡ Due in ${diffDays} day(s).`;
      }
    } else {
      elements.countdownText.textContent = "";
    }
  }

  elements.dueDate.addEventListener("change", updateCountdown);
  updateCountdown();

  // AI Fill
  document.getElementById("aiFillBtn").addEventListener("click", () => {
    const invoice = elements.invoiceNumber.value || "INV-2025-001";
    const due = elements.dueDate.value || "2025-09-05";
    const amount = elements.amountDue.value || "â‚¬500";
    elements.messageBody.value = `This is a friendly reminder that invoice ${invoice} was due on ${due}. Please arrange payment of ${amount} at your earliest convenience.`;
    elements.messageBody.classList.add("ai-filled");
  });

  // Load Example
  document.getElementById("loadExampleBtn").addEventListener("click", () => {
    elements.businessName.value = "SmartWerk B.V.";
    elements.senderName.value = "Igor Sulima";
    elements.senderEmail.value = "info@smartwerk.nl";
    elements.businessIBAN.value = "NL12INGB0001234567";
    elements.businessAddress.value = "Den Bosch, Netherlands";

    elements.clientName.value = "Jan Jansen";
    elements.clientEmail.value = "jan@example.com";
    elements.clientAddress.value = "Amsterdam, Netherlands";

    elements.invoiceNumber.value = "INV-2025-001";
    elements.invoiceDate.value = "2025-08-20";
    elements.dueDate.value = "2025-09-01";
    elements.amountDue.value = "â‚¬500";
    elements.paymentLink.value = "https://www.paynow.com/invoice/INV-2025-001";
    elements.status.value = "First Reminder";
    elements.city.value = "Den Bosch";
    elements.signatureName.value = "Igor Sulima";
    elements.signaturePosition.value = "Founder";
    elements.signatureContact.value = "info@smartwerk.nl";

    updateCountdown();
  });

  // Save Reminder
  document.getElementById("saveReminderBtn").addEventListener("click", () => {
    const reminder = {};
    for (let key in elements) {
      reminder[key] = elements[key]?.value || "";
    }
    let saved = JSON.parse(localStorage.getItem("savedReminders") || "[]");
    saved.push(reminder);
    localStorage.setItem("savedReminders", JSON.stringify(saved));
    alert("âœ… Reminder saved!");
  });

  // Load Saved Reminders
  document.getElementById("viewSavedBtn").addEventListener("click", () => {
    const saved = JSON.parse(localStorage.getItem("savedReminders") || "[]");
    if (saved.length === 0) {
      alert("No saved reminders.");
      return;
    }
    let out = "Saved Reminders:\n\n";
    saved.forEach((r, i) => {
      out += `${i + 1}. ${r.invoiceNumber} (${r.status}) â€” ${r.clientName}\n`;
    });
    alert(out);
  });

  // Send Email
  document.getElementById("sendEmailBtn").addEventListener("click", () => {
    const body = elements.messageBody.value;
    const subject = `Payment Reminder: ${elements.invoiceNumber.value}`;
    const to = elements.clientEmail.value;
    const mailto = `mailto:${to}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    window.open(mailto, "_blank");
  });

  // Print
  document.getElementById("printBtn").addEventListener("click", () => {
    window.print();
  });
});

    </script>
</body>
</html>
