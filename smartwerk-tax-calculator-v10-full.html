
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SmartWerk Tax Calculator v10</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f4f4f4;
    }
    input, select {
      width: 300px;
      margin-bottom: 10px;
      padding: 8px;
    }
    .button-group button {
      margin-right: 10px;
      padding: 10px 15px;
    }
    #result {
      margin-top: 20px;
      padding: 20px;
      background: #e8ffe8;
      border-radius: 8px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<h2>SmartWerk Tax Calculator v10</h2>

<h3>Step 1: Your Info</h3>
<input type="text" id="company" placeholder="Company Name"><br>
<input type="email" id="email" placeholder="Email / Phone"><br>
<select id="period">
  <option>January â€“ March (Q1)</option>
  <option>April â€“ June (Q2)</option>
  <option>July â€“ September (Q3)</option>
  <option>October â€“ December (Q4)</option>
</select><br>
<input type="number" id="hoursWorked" placeholder="Hours Worked"><br>
<input type="number" id="hourlyRate" placeholder="Hourly Rate (EUR)"><br>
<input type="number" id="income" placeholder="Total Income (auto)" readonly><br>

<h3>Step 2: Expenses</h3>
<input type="number" id="vehicle" placeholder="Vehicle Expenses"><br>
<input type="number" id="office" placeholder="Office Expenses"><br>
<input type="number" id="internet" placeholder="Internet Expenses"><br>
<input type="number" id="marketing" placeholder="Marketing Expenses"><br>
<input type="number" id="other" placeholder="Other Expenses"><br>
<input type="number" id="extraBenefits" placeholder="Extra Benefits (EUR)"><br>

<h3>Step 3: Tax Options</h3>
<label>KvK Registered?</label>
<select id="kvk">
  <option value="yes">Yes</option>
  <option value="no">No</option>
</select><br>
<label>Worked 1,225+ hours?</label>
<select id="zzpHours">
  <option value="yes">Yes</option>
  <option value="no">No</option>
</select><br>
<label>BTW Rate</label>
<select id="btwRate">
  <option value="21">21%</option>
  <option value="9">9%</option>
  <option value="0">0%</option>
</select><br>
<label>Use KOR?</label>
<select id="kor">
  <option value="no">No</option>
  <option value="yes">Yes</option>
</select><br>

<div class="button-group">
  <button onclick="calculate()">ðŸ“Š Calculate Tax</button>
</div>

<div id="result">Complete the form to see summaryâ€¦</div>

<script>
function autoCalcIncome() {
  const h = document.getElementById("hoursWorked").value || 0;
  const r = document.getElementById("hourlyRate").value || 0;
  document.getElementById("income").value = h * r;
}

function calculate() {
  const income = parseFloat(document.getElementById("income").value) || 0;
  const vehicle = parseFloat(document.getElementById("vehicle").value) || 0;
  const office = parseFloat(document.getElementById("office").value) || 0;
  const internet = parseFloat(document.getElementById("internet").value) || 0;
  const marketing = parseFloat(document.getElementById("marketing").value) || 0;
  const other = parseFloat(document.getElementById("other").value) || 0;
  const extra = parseFloat(document.getElementById("extraBenefits").value) || 0;

  const expenses = vehicle + office + internet + marketing + other;
  const profit = income - expenses;

  const kvk = document.getElementById("kvk").value === "yes";
  const zzp = document.getElementById("zzpHours").value === "yes";

  const aftrek = (kvk && zzp) ? 2123 + 5030 : 0;
  const zzpDeduction = aftrek + extra;
  const taxable = Math.max(0, profit - zzpDeduction);
  const mkb = taxable * 0.127;
  const cappedTaxable = taxable - mkb;
  const incomeTax = cappedTaxable <= 20000 ? cappedTaxable * 0.19 : cappedTaxable * 0.258;
  const zvw = profit * 0.0532;

  const kor = document.getElementById("kor").value === "yes";
  const btwRate = parseFloat(document.getElementById("btwRate").value) || 0;
  const btw = kor ? 0 : income * (btwRate / 100);

  const totalTax = incomeTax + zvw + btw;

  document.getElementById("result").innerHTML = `
    <b>Gross Income:</b> â‚¬${income.toFixed(2)}<br>
    <b>Total Expenses:</b> â‚¬${expenses.toFixed(2)}<br>
    <b>Profit:</b> â‚¬${profit.toFixed(2)}<br>
    <b>Deductions:</b> â‚¬${zzpDeduction.toFixed(2)}<br>
    <b>Final Taxable Income:</b> â‚¬${cappedTaxable.toFixed(2)}<br>
    <b>Income Tax:</b> â‚¬${incomeTax.toFixed(2)}<br>
    <b>ZVW (5.32%):</b> â‚¬${zvw.toFixed(2)}<br>
    <b>BTW (${kor ? "KOR" : btwRate + "%" }):</b> â‚¬${btw.toFixed(2)}<br>
    <b>Total Estimated Tax:</b> â‚¬${totalTax.toFixed(2)}<br>
    âœ… <b>You saved:</b> â‚¬${zzpDeduction.toFixed(2)} with ZZP deductions
  `;
}

window.onload = () => {
  autoCalcIncome();
  calculate();
  document.querySelectorAll("input, select").forEach(el => {
    el.addEventListener("input", () => {
      autoCalcIncome();
      calculate();
    });
    el.addEventListener("change", () => {
      autoCalcIncome();
      calculate();
    });
  });
};
</script>

</body>
</html>
