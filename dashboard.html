<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SmartWerk â€” Dashboard</title>
  <link rel="stylesheet" href="style-dashboard.css"/>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">âš¡ SmartWerk</div>
    <nav>
      <h3>ğŸ’° Invoices</h3>
      <a href="invoice.html">ğŸ“„ Create Invoice</a>
      <a href="invoices-list.html">ğŸ“‹ Saved Invoices</a>

      <h3>ğŸ“‘ Quotes</h3>
      <a href="quote-offer.html">ğŸ“„ Create Quote</a>
      <a href="quote-offer-list.html">ğŸ“‹ Saved Quotes</a>

      <h3>ğŸ“ƒ Contracts</h3>
      <a href="contract.html">ğŸ“„ Create Contract</a>
      <a href="contract-list.html">ğŸ“‹ Saved Contracts</a>

      <h3>ğŸ“¬ Reminders</h3>
      <a href="payment-reminder.html">ğŸ’¸ Create Reminder</a>
      <a href="payment-reminder-list.html">ğŸ“‹ Saved Reminders</a>

      <h3>ğŸ“‚ Templates</h3>
      <a href="email-gemeente.html">ğŸ“© Email to Gemeente</a>
      <a href="cv.html">ğŸ“„ CV / Portfolio</a>

      <h3>ğŸ“Š Analytics</h3>
      <a href="my-bookkeeper.html">ğŸ† My Bookkeeper</a>
      <a href="summary.html">ğŸ“Š Summary</a>
      <a href="roi-estimator.html">ğŸ§® ROI Estimator</a>
      <a href="tax-calculator.html">ğŸ§® Tax Calculator</a>

      <h3>âš™ï¸ Settings</h3>
      <a href="profile.html">ğŸ‘¤ Profile</a>
    </nav>
    <div class="logout">
      <button id="logoutBtn">ğŸšª Logout</button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="content">
    <header>
      <h1 id="welcome">Welcome ğŸ‘‹</h1>
      <div id="planStatus" class="plan-status">
        <p>ğŸ†“ Free Plan â€” <span id="usage">0 / 25 uses</span></p>
        <div class="progress"><div id="progressBar"></div></div>
        <button id="upgradeBtn">ğŸš€ Upgrade to PRO</button>
      </div>
    </header>

    <!-- Grid of tools -->
    <section class="grid">
      <div class="card">
        <h2>ğŸ“„ Invoices</h2>
        <p>Create & manage invoices</p>
        <div class="actions">
          <a href="invoice.html" class="btn">Create</a>
          <a href="invoices-list.html" class="btn">Saved</a>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“‘ Quotes</h2>
        <p>Send offers to clients</p>
        <div class="actions">
          <a href="quote-offer.html" class="btn">Create</a>
          <a href="quote-offer-list.html" class="btn">Saved</a>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“ƒ Contracts</h2>
        <p>Sign freelance agreements</p>
        <div class="actions">
          <a href="contract.html" class="btn">Create</a>
          <a href="contract-list.html" class="btn">Saved</a>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“¬ Reminders</h2>
        <p>Polite payment reminders</p>
        <div class="actions">
          <a href="payment-reminder.html" class="btn">Create</a>
          <a href="payment-reminder-list.html" class="btn">Saved</a>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“‚ Templates</h2>
        <p>Emails & CV/Portfolio</p>
        <div class="actions">
          <a href="email-gemeente.html" class="btn">Gemeente</a>
          <a href="cv.html" class="btn">CV</a>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“Š Analytics</h2>
        <p>Track your finances</p>
        <div class="actions">
          <a href="my-bookkeeper.html" class="btn">Bookkeeper</a>
          <a href="summary.html" class="btn">Summary</a>
          <a href="roi-estimator.html" class="btn">ROI</a>
          <a href="tax-calculator.html" class="btn">Tax</a>
        </div>
      </div>

      <div class="card">
        <h2>âš™ï¸ Settings</h2>
        <p>Manage your profile</p>
        <div class="actions">
          <a href="profile.html" class="btn">Profile</a>
        </div>
      </div>
    </section>
  </main>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAp397Ax_jaMI85vOXicOi61g64HvvA_Kg",
      authDomain: "smartwerk8520.firebaseapp.com",
      projectId: "smartwerk8520",
      appId: "1:607670981972:web:c07103c981c86860d724c1",
    };
    const app = getApps().length ? getApp() : initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db   = getFirestore(app);

    const $ = id => document.getElementById(id);

    onAuthStateChanged(auth, async(user)=>{
      if(!user){ location.href="login.html"; return; }
      const snap = await getDoc(doc(db,"users",user.uid));
      if(snap.exists()){
        const p = snap.data();
        $("welcome").innerText = `Welcome, ${p.fullName || "User"} ğŸ‘‹`;
      }
      // Ğ¿Ğ»Ğ°Ğ½ (Ğ·Ğ°Ğ³Ğ»ÑƒÑˆĞºĞ°: Free / PRO)
      $("usage").innerText = "12 / 25 uses";
      $("progressBar").style.width = "48%";
    });

    $("logoutBtn").addEventListener("click",()=>signOut(auth));
  </script>
</body>
</html>
