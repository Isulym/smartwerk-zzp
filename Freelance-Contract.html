<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ðŸ“ƒ Freelance Contract - SmartWerk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: sans-serif;
      background: #f9f9f9;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
    }
    h1, h2 {
      color: #222;
    }
    input, textarea, select, button {
      width: 100%;
      margin: 5px 0 15px;
      padding: 10px;
      font-size: 1rem;
    }
    textarea { height: 80px; resize: vertical; }
    .btn { padding: 10px 15px; font-weight: bold; cursor: pointer; }
    .btn-group button {
      display: inline-block;
      width: auto;
      margin-right: 10px;
    }
    .section { margin-top: 2rem; }
    #contractPreview { white-space: pre-wrap; background: #fff; padding: 10px; border: 1px solid #ccc; }
    .small-note { font-size: 0.9rem; color: #888; }
  </style>
</head>
<body>
  <h1>ðŸ“ƒ Create Freelance Contract</h1>
  <p class="small-note">Fill in the contract details, generate PDF/DOCX, save locally or use AI to help you.</p>

  <div class="section">
    <h2>Business Info</h2>
    <input id="businessName" placeholder="Your Business Name" />
    <input id="businessKvK" placeholder="KvK Number (optional)" />
    <input id="businessVAT" placeholder="VAT Number (optional)" />
    <input id="businessIBAN" placeholder="IBAN (optional)" />
  </div>

  <div class="section">
    <h2>Client Info</h2>
    <input id="clientName" placeholder="Client Name" />
    <input id="clientAddress" placeholder="Client Address (optional)" />
  </div>

  <div class="section">
    <h2>Project</h2>
    <textarea id="projectDescription" placeholder="Describe the project scope..."></textarea>
    <textarea id="timeline" placeholder="Timeline / Milestones (optional)"></textarea>
  </div>

  <div class="section">
    <h2>Payment Terms</h2>
    <input id="rate" placeholder="Total Rate / Hourly Rate" />
    <textarea id="paymentTerms" placeholder="E.g. 50% upfront, 50% after delivery (optional)"></textarea>
  </div>

  <div class="section">
    <h2>Legal</h2>
    <textarea id="terminationClause" placeholder="Termination terms, cancellation period, etc."></textarea>
    <textarea id="jurisdiction" placeholder="This contract is governed by the laws of the Netherlands."></textarea>
  </div>

  <div class="section">
    <h2>Signature</h2>
    <input id="signatureName" placeholder="Your Name" />
    <input type="date" id="contractDate" />
  </div>

  <div class="btn-group">
    <button onclick="fillAI()">ðŸ¤– AI Fill</button>
    <button onclick="saveContract()">ðŸ’¾ Save</button>
    <button onclick="viewSavedContracts()">ðŸ“‚ Saved Contracts</button>
    <button onclick="downloadPDF()">ðŸ“„ Export PDF</button>
    <button onclick="downloadDOCX()">Download DOCX</button>
  </div>

  <div class="section">
    <h2>Preview</h2>
    <div id="contractPreview">Contract will appear here...</div>
  </div>

  <script>
    function generateContractText() {
      const today = new Date().toLocaleDateString();
      return `
FREELANCE CONTRACT

Date: ${document.getElementById('contractDate').value || today}
Business: ${businessName.value}
KvK: ${businessKvK.value}
VAT: ${businessVAT.value}
IBAN: ${businessIBAN.value}

Client: ${clientName.value}
Address: ${clientAddress.value}

Project:
${projectDescription.value}

Timeline:
${timeline.value}

Payment Terms:
${rate.value}
${paymentTerms.value}

Legal:
${terminationClause.value}
${jurisdiction.value}

Signature: ${signatureName.value}
      `.trim();
    }

    function updatePreview() {
      document.getElementById('contractPreview').textContent = generateContractText();
    }

    const fields = document.querySelectorAll("input, textarea");
    fields.forEach(f => f.addEventListener("input", updatePreview));

    function fillAI() {
      document.getElementById('projectDescription').value = "Develop a responsive website for the client's online store.";
      document.getElementById('timeline').value = "Week 1: Wireframe, Week 2: Development, Week 3: Testing & Launch";
      document.getElementById('paymentTerms').value = "50% upfront, 50% after delivery";
      document.getElementById('terminationClause').value = "Either party may terminate with 7 days written notice.";
      document.getElementById('jurisdiction').value = "This contract is governed by the laws of the Netherlands.";
      updatePreview();
    }

    function saveContract() {
      const saved = JSON.parse(localStorage.getItem("contracts") || "[]");
      saved.push(generateContractText());
      localStorage.setItem("contracts", JSON.stringify(saved));
      alert("âœ… Contract saved!");
    }

    function viewSavedContracts() {
      const saved = JSON.parse(localStorage.getItem("contracts") || "[]");
      if (!saved.length) return alert("No saved contracts yet.");
      alert("Saved Contracts:\n\n" + saved.join("\n\n---\n\n"));
    }

    function downloadPDF() {
      const text = generateContractText();
      const win = window.open('', '', 'width=800,height=600');
      win.document.write(`<pre>${text}</pre>`);
      win.document.close();
      win.print();
    }

    function downloadDOCX() {
      const text = generateContractText();
      const blob = new Blob([text], { type: "application/msword" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = `SmartWerk-Freelance-Contract.doc`;
      link.click();
    }

    updatePreview();
  </script>
</body>
</html>
