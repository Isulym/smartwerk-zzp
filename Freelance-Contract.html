<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>üìÉ Freelance Contract ‚Äî SmartWerk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style-Freelance-Contract.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <header class="topbar">
      <a class="brand" href="templates.html">üìÉ Freelance Contract</a>
      <nav class="right">
        <a href="dashboard.html" class="btn">‚Üê Back to Dashboard</a>
        <a href="templates.html" class="btn">‚Üê Back to Templates</a>
      </nav>
    </header>

    <form id="contractForm">
      <h2>üßæ Business Info</h2>
      <input id="businessName" placeholder="Business Name" required />
      <input id="businessAddress" placeholder="Business Address" />
      <input id="businessKvK" placeholder="KvK Number" />
      <input id="businessVAT" placeholder="VAT Number" />

      <h2>üë§ Client Info</h2>
      <input id="clientName" placeholder="Client Name" required />
      <input id="clientAddress" placeholder="Client Address" />
      <input id="clientEmail" placeholder="Client Email" />
      <input id="clientPhone" placeholder="Client Phone" />

      <h2>üíº Project</h2>
      <input id="projectTitle" placeholder="Project Title" required />
      <textarea id="projectDescription" placeholder="Project Description"></textarea>

      <h2>‚è± Timeline & Deliverables</h2>
      <textarea id="timeline" placeholder="Timeline and Deliverables..."></textarea>

      <h2>üí∂ Payment Terms</h2>
      <textarea id="paymentTerms" placeholder="Payment Terms..."></textarea>

      <h2>üìú Legal</h2>
      <textarea id="legalTerms" placeholder="Legal Terms and Conditions..."></textarea>

      <h2>‚úçÔ∏è Signatures</h2>
      <input id="signatureBusiness" placeholder="Business Signature" />
      <input id="signatureClient" placeholder="Client Signature" />
      <input id="contractDate" type="date" />

      <div class="actions">
        <button type="button" id="aiFillBtn" class="btn">‚ö° AI Fill</button>
        <button type="button" id="saveContractBtn" class="btn primary">üíæ Save Contract</button>
        <button type="button" id="viewContractsBtn" class="btn">üìÇ View Saved Contracts</button>
        <button type="button" id="exportPdfBtn" class="btn">üìÑ Export PDF</button>
      </div>
    </form>
    
  <div class="form-section">
  <label>
    <input type="checkbox" id="togglePro" />
    Enable PRO (no branding in PDF)
  </label>
</div>

    <div id="savedContractsSection" style="display:none;">
      <h2>üìÇ Saved Contracts</h2>
      <table>
        <thead>
          <tr><th>Contract No</th><th>Client</th><th>Project</th><th>Date</th><th>Actions</th></tr>
        </thead>
        <tbody id="savedContractsBody"></tbody>
      </table>
    </div>
  </div>

  <script>

    // === PRO toggle ===
const togglePro = document.getElementById("togglePro");
if (togglePro) {
  togglePro.checked = localStorage.getItem("proUser") === "true";
  togglePro.addEventListener("change", (e) => {
    localStorage.setItem("proUser", e.target.checked ? "true" : "false");
  });
}
    
    // Save contract
    document.getElementById("saveContractBtn").addEventListener("click", () => {
      const saved = JSON.parse(localStorage.getItem("savedContracts") || "[]");
      const contract = {
        contractNumber: "C-" + Date.now(),
        clientName: document.getElementById("clientName").value,
        projectTitle: document.getElementById("projectTitle").value,
        date: new Date().toLocaleDateString(),
        businessName: document.getElementById("businessName").value,
        businessAddress: document.getElementById("businessAddress").value,
        businessKvK: document.getElementById("businessKvK").value,
        businessVAT: document.getElementById("businessVAT").value,
        clientAddress: document.getElementById("clientAddress").value,
        clientEmail: document.getElementById("clientEmail").value,
        clientPhone: document.getElementById("clientPhone").value,
        projectDescription: document.getElementById("projectDescription").value,
        timeline: document.getElementById("timeline").value,
        paymentTerms: document.getElementById("paymentTerms").value,
        legalTerms: document.getElementById("legalTerms").value,
        signatureBusiness: document.getElementById("signatureBusiness").value,
        signatureClient: document.getElementById("signatureClient").value,
        contractDate: document.getElementById("contractDate").value,
      };
      saved.push(contract);
      localStorage.setItem("savedContracts", JSON.stringify(saved));
      alert("‚úÖ Contract saved");
    });

    // View saved contracts
    document.getElementById("viewContractsBtn").addEventListener("click", () => {
      document.getElementById("savedContractsSection").style.display = "block";
      loadSavedContracts();
    });

    function loadSavedContracts() {
      const saved = JSON.parse(localStorage.getItem("savedContracts") || "[]");
      const tbody = document.getElementById("savedContractsBody");
      tbody.innerHTML = "";
      saved.forEach((c, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${c.contractNumber}</td>
          <td>${c.clientName}</td>
          <td>${c.projectTitle}</td>
          <td>${c.date}</td>
          <td>
            <button class="btn small" onclick="loadContract(${i})">üëÅ View</button>
            <button class="btn small danger" onclick="deleteContract(${i})">üóë Delete</button>
          </td>`;
        tbody.appendChild(tr);
      });
    }

    function loadContract(index) {
      const c = JSON.parse(localStorage.getItem("savedContracts"))[index];
      for (let key in c) {
        const el = document.getElementById(key);
        if (el) el.value = c[key];
      }
      alert("‚úÖ Contract loaded into form");
    }

    function deleteContract(index) {
      const saved = JSON.parse(localStorage.getItem("savedContracts") || "[]");
      saved.splice(index, 1);
      localStorage.setItem("savedContracts", JSON.stringify(saved));
      loadSavedContracts();
    }

    // AI Fill (dummy)
    document.getElementById("aiFillBtn").addEventListener("click", () => {
      document.getElementById("projectDescription").value = "Redesign and optimization of the client's website.";
      document.getElementById("timeline").value = "Project starts 10.09.2025 and ends 30.09.2025.";
      document.getElementById("paymentTerms").value = "‚Ç¨1000 upfront, ‚Ç¨1000 after delivery.";
      document.getElementById("legalTerms").value = "Standard freelance contract terms apply.";
    });

    // Export PDF
document.getElementById("exportPdfBtn").addEventListener("click", () => {
  const proUser = localStorage.getItem("proUser") === "true";
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  const businessName = document.getElementById("businessName")?.value || "";
  const businessEmail = document.getElementById("businessEmail")?.value || "";
  const businessPhone = document.getElementById("businessPhone")?.value || "";
  const businessAddress = document.getElementById("businessAddress")?.value || "";

  const clientName = document.getElementById("clientName")?.value || "";
  const clientEmail = document.getElementById("clientEmail")?.value || "";
  const clientPhone = document.getElementById("clientPhone")?.value || "";
  const clientAddress = document.getElementById("clientAddress")?.value || "";

  const projectTitle = document.getElementById("projectTitle")?.value || "";
  const projectDescription = document.getElementById("projectDescription")?.value || "";
  const timeline = document.getElementById("timeline")?.value || "";
  const paymentTerms = document.getElementById("paymentTerms")?.value || "";
  const legalTerms = document.getElementById("legalTerms")?.value || "";

  const signatureFreelancer = document.getElementById("signatureFreelancer")?.value || "";
  const signatureClient = document.getElementById("signatureClient")?.value || "";
  const signatureDate = document.getElementById("signatureDate")?.value || "";

  let y = 20;
  doc.setFontSize(14);
  doc.setFont(undefined, 'bold');
  doc.text("Freelance Contract", 105, y, { align: "center" });

  y += 10;
  doc.setFontSize(10);
  doc.setFont(undefined, 'bold');
  doc.text("Business Info:", 15, y);
  doc.setFont(undefined, 'normal');
  doc.text(`Name: ${businessName}`, 15, y += 5);
  doc.text(`Email: ${businessEmail}`, 15, y += 5);
  doc.text(`Phone: ${businessPhone}`, 15, y += 5);
  doc.text(`Address: ${businessAddress}`, 15, y += 5);

  y += 8;
  doc.setFont(undefined, 'bold');
  doc.text("Client Info:", 15, y);
  doc.setFont(undefined, 'normal');
  doc.text(`Name: ${clientName}`, 15, y += 5);
  doc.text(`Email: ${clientEmail}`, 15, y += 5);
  doc.text(`Phone: ${clientPhone}`, 15, y += 5);
  doc.text(`Address: ${clientAddress}`, 15, y += 5);

  y += 8;
  doc.setFont(undefined, 'bold');
  doc.text("Project:", 15, y);
  doc.setFont(undefined, 'normal');
  doc.text(`Title: ${projectTitle}`, 15, y += 5);
  doc.text(doc.splitTextToSize(`Description: ${projectDescription}`, 180), 15, y += 5);

  y += 8;
  doc.setFont(undefined, 'bold');
  doc.text("Timeline:", 15, y);
  doc.setFont(undefined, 'normal');
  doc.text(doc.splitTextToSize(timeline, 180), 15, y += 5);

  y += 8;
  doc.setFont(undefined, 'bold');
  doc.text("Payment Terms:", 15, y);
  doc.setFont(undefined, 'normal');
  doc.text(doc.splitTextToSize(paymentTerms, 180), 15, y += 5);

  y += 8;
  doc.setFont(undefined, 'bold');
  doc.text("Legal Terms:", 15, y);
  doc.setFont(undefined, 'normal');
  doc.text(doc.splitTextToSize(legalTerms, 180), 15, y += 5);

  y += 12;
  doc.setFont(undefined, 'bold');
  doc.text("Signatures:", 15, y);
  doc.setFont(undefined, 'normal');
  doc.text(`Freelancer: ${signatureFreelancer}`, 15, y += 5);
  doc.text(`Client: ${signatureClient}`, 15, y += 5);
  doc.text(`Date: ${signatureDate}`, 15, y += 5);

  if (!proUser) {
    doc.setFontSize(8);
    doc.setTextColor(150);
    doc.text("Generated with SmartWerk ‚Äî smartwerk.nl", 15, 285);
  }

  doc.save(`Freelance-Contract.pdf`);
});
  </script>
</body>
</html>
