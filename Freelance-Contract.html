<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style-invoice-template.css" />
  <title>📃 Freelance Contract - SmartWerk</title>
</head>
<body>
  <div class="wrap">
    <header class="topbar">
      <a class="brand" href="templates.html">📃 Freelance Contract</a>
      <a href="dashboard.html" class="btn ghost">← Back to Dashboard</a>
    </header>

    <form id="contractForm">
      <div class="form-section"><h2>🧾 Business Info</h2>
        <input type="text" id="businessName" placeholder="Your Business Name" required />
        <input type="text" id="businessKvK" placeholder="KvK Number (optional)" />
        <input type="text" id="businessVAT" placeholder="VAT Number (optional)" />
        <input type="text" id="businessIBAN" placeholder="IBAN (optional)" />
      </div>

      <div class="form-section"><h2>👤 Client Info</h2>
        <input type="text" id="clientName" placeholder="Client Name" required />
        <input type="text" id="clientAddress" placeholder="Client Address" />
      </div>

      <div class="form-section"><h2>📋 Project</h2>
        <textarea id="projectDescription" placeholder="Describe the project scope and deliverables..." required></textarea>
        <textarea id="timeline" placeholder="Timeline / Milestones (optional)"></textarea>
      </div>

      <div class="form-section"><h2>💶 Payment</h2>
        <input type="text" id="rate" placeholder="Total Rate / Hourly Rate" />
        <textarea id="paymentTerms" placeholder="e.g. 50% upfront, 50% after delivery (optional)"></textarea>
      </div>

      <div class="form-section"><h2>⚖️ Legal</h2>
        <textarea id="terminationClause" placeholder="Termination terms, cancellation period, etc."></textarea>
        <textarea id="jurisdiction" placeholder="This contract is governed by the laws of the Netherlands."></textarea>
      </div>

      <div class="form-section"><h2>✍️ Signature</h2>
        <input type="text" id="signatureName" placeholder="Your Name" required />
        <input type="date" id="contractDate" required />
      </div>

      <div class="actions">
        <button type="button" class="btn ghost" id="aiFillBtn">🤖 AI Fill</button>
        <button type="button" class="btn" id="saveBtn">💾 Save</button>
        <button type="button" class="btn ghost" id="viewBtn">📂 Saved Contracts</button>
        <button type="button" class="btn primary" id="downloadPDFBtn">📄 PDF</button>
        <button type="button" class="btn ghost" id="downloadDOCXBtn">DOCX</button>
        <button type="button" class="btn" id="saveContractBtn">💾 Save Contract</button>
      </div>
      <div id="savedContracts" class="saved-contracts"></div>
    </form>

    <div id="savedContractsList"></div>

    <footer class="foot-note">
      <p>Generated with SmartWerk — smartwerk.nl</p>
    </footer>
  </div>

 <script>
document.addEventListener("DOMContentLoaded", () => {
  const aiFillBtn = document.getElementById("aiFillBtn");
  const saveBtn = document.getElementById("saveBtn");
  const savedBtn = document.getElementById("savedBtn");

  const businessName = document.getElementById("businessName");
  const businessKvK = document.getElementById("businessKvK");
  const businessVAT = document.getElementById("businessVAT");
  const businessIBAN = document.getElementById("businessIBAN");
  const clientName = document.getElementById("clientName");
  const clientAddress = document.getElementById("clientAddress");
  const projectDescription = document.getElementById("projectDescription");
  const timeline = document.getElementById("timeline");
  const rate = document.getElementById("rate");
  const paymentTerms = document.getElementById("paymentTerms");
  const terminationClause = document.getElementById("terminationClause");
  const jurisdiction = document.getElementById("jurisdiction");
  const signatureName = document.getElementById("signatureName");
  const contractDate = document.getElementById("contractDate");

  aiFillBtn.addEventListener("click", () => {
    projectDescription.value = `Design and deliver a modern website with homepage, contact form, and CMS.`;
    timeline.value = `Start: ${new Date().toLocaleDateString()}, End: ...`;
    rate.value = "€1200";
    paymentTerms.value = "50% upfront, 50% upon completion.";
    terminationClause.value = "Both parties may terminate with 7 days notice.";
    jurisdiction.value = "This contract is governed by the laws of the Netherlands.";
  });

  saveBtn.addEventListener("click", () => {
    const contractData = {
      businessName: businessName.value,
      businessKvK: businessKvK.value,
      businessVAT: businessVAT.value,
      businessIBAN: businessIBAN.value,
      clientName: clientName.value,
      clientAddress: clientAddress.value,
      projectDescription: projectDescription.value,
      timeline: timeline.value,
      rate: rate.value,
      paymentTerms: paymentTerms.value,
      terminationClause: terminationClause.value,
      jurisdiction: jurisdiction.value,
      signatureName: signatureName.value,
      contractDate: contractDate.value,
    };

    let saved = JSON.parse(localStorage.getItem("smartwerkContracts") || "[]");
    saved.push(contractData);
    localStorage.setItem("smartwerkContracts", JSON.stringify(saved));
    alert("✅ Contract saved successfully!");
  });

  savedBtn.addEventListener("click", () => {
    const saved = JSON.parse(localStorage.getItem("smartwerkContracts") || "[]");
    if (saved.length === 0) {
      alert("📂 No saved contracts found.");
      return;
    }

    let message = "📂 Saved Contracts:\n\n";
    saved.forEach((c, i) => {
      message += `${i + 1}. ${c.clientName} – ${c.contractDate}\n`;
    });
    alert(message);
  });
});

<!-- ДОДАТИ ПІСЛЯ ОСНОВНОГО JS -->
 type="module">
  import jsPDF from "https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js";
  import autoTable from "https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.25/dist/jspdf.plugin.autotable.min.js";
  import { saveAs } from "https://cdn.jsdelivr.net/npm/file-saver@2.0.5/+esm";
  import { Document, Packer, Paragraph, TextRun, HeadingLevel } from "https://cdn.jsdelivr.net/npm/docx@7.7.0/+esm";

  const get = (id) => document.getElementById(id)?.value || "-";

  // 📄 PDF Export
  document.getElementById("downloadPDFBtn").addEventListener("click", async () => {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    let y = 20;

    function section(title, content) {
      doc.setFontSize(14);
      doc.setFont(undefined, "bold");
      doc.text(title, 14, y);
      y += 6;
      doc.setFontSize(12);
      doc.setFont(undefined, "normal");
      const split = doc.splitTextToSize(content, 180);
      doc.text(split, 14, y);
      y += split.length * 6 + 4;
    }

    doc.setFontSize(18);
    doc.text("📃 Freelance Contract", 14, y);
    y += 10;

    section("🧾 Business Info", `Name: ${get("businessName")}\nKvK: ${get("businessKvK")}\nVAT: ${get("businessVAT")}\nIBAN: ${get("businessIBAN")}`);
    section("👤 Client Info", `Name: ${get("clientName")}\nAddress: ${get("clientAddress")}`);
    section("📋 Project Description", get("projectDescription"));
    section("📅 Timeline", get("timeline"));
    section("💶 Payment Terms", `Rate: ${get("rate")}\nTerms: ${get("paymentTerms")}`);
    section("⚖️ Legal", `Termination: ${get("terminationClause")}\nJurisdiction: ${get("jurisdiction")}`);
    section("✍️ Signature", `Name: ${get("signatureName")}\nDate: ${get("contractDate")}`);

    doc.setFontSize(10);
    doc.setTextColor(150);
    doc.text("Generated with SmartWerk — smartwerk.nl", 14, 290);

    doc.save(`SmartWerk-Contract-${get("clientName")}.pdf`);
  });

  // 📄 DOCX Export
  document.getElementById("downloadDOCXBtn").addEventListener("click", () => {
    const doc = new Document({
      sections: [
        {
          children: [
            new Paragraph({
              text: "📃 Freelance Contract",
              heading: HeadingLevel.TITLE,
            }),
            new Paragraph({ text: `Generated by SmartWerk on ${get("contractDate")}`, spacing: { after: 300 } }),
            sectionDocx("🧾 Business Info", [
              `Name: ${get("businessName")}`,
              `KvK: ${get("businessKvK")}`,
              `VAT: ${get("businessVAT")}`,
              `IBAN: ${get("businessIBAN")}`,
            ]),
            sectionDocx("👤 Client Info", [
              `Name: ${get("clientName")}`,
              `Address: ${get("clientAddress")}`,
            ]),
            sectionDocx("📋 Project Details", [
              `Description: ${get("projectDescription")}`,
              `Timeline: ${get("timeline")}`,
            ]),
            sectionDocx("💶 Payment Terms", [
              `Rate: ${get("rate")}`,
              `Terms: ${get("paymentTerms")}`,
            ]),
            sectionDocx("⚖️ Legal", [
              `Termination Clause: ${get("terminationClause")}`,
              `Jurisdiction: ${get("jurisdiction")}`,
            ]),
            sectionDocx("✍️ Signature", [
              `Signed by: ${get("signatureName")}`,
              `Date: ${get("contractDate")}`,
            ]),
            new Paragraph({
              text: "Generated with SmartWerk — smartwerk.nl",
              spacing: { before: 300 },
              style: "footer",
            }),
          ],
        },
      ],
    });

    Packer.toBlob(doc).then((blob) => {
      saveAs(blob, `SmartWerk-Contract-${get("clientName")}.docx`);
    });
  });

  function sectionDocx(title, lines) {
    return [
      new Paragraph({
        text: title,
        heading: HeadingLevel.HEADING_2,
        spacing: { after: 100 },
      }),
      ...lines.map((line) => new Paragraph({
        children: [new TextRun(line)],
        spacing: { after: 100 },
      })),
    ];
  }

   
</script>

  <script type="module" src="https://smartwerk.cdnjs.dev/freelance-contract.js"></script>
</body>
</html>
