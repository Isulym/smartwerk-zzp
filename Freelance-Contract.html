<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>📃 Freelance Contract - SmartWerk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <link rel="stylesheet" href="style-Freelance-Contract.css" />
</head>
<body>
  <h1>📃 Create Freelance Contract</h1>
  <p class="small-note">Fill in the contract details, generate PDF/DOCX, save locally or use AI to help you.</p>

  <header class="topbar">
      <a class="brand" href="templates.html">📄 SmartWerk Quote / Offer</a>
      <nav class="right">
        <a href="dashboard.html" class="btn">← Back to Dashboard</a>
        <a href="templates.html" class="btn">← Back to Templates</a>
      </nav>
    </header>

  <div class="section">
    <h2>Business Info</h2>
    <input id="businessName" placeholder="Your Business Name" />
    <input id="businessKvK" placeholder="KvK Number (optional)" />
    <input id="businessVAT" placeholder="VAT Number (optional)" />
    <input id="businessIBAN" placeholder="IBAN (optional)" />
  </div>

  <div class="section">
    <h2>Client Info</h2>
    <input id="clientName" placeholder="Client Name" />
    <input id="clientAddress" placeholder="Client Address (optional)" />
  </div>

  <div class="section">
    <h2>Project</h2>
    <textarea id="projectDescription" placeholder="Describe the project scope..."></textarea>
    <textarea id="timeline" placeholder="Timeline / Milestones (optional)"></textarea>
  </div>

  <div class="section">
    <h2>Payment Terms</h2>
    <input id="rate" placeholder="Total Rate / Hourly Rate" />
    <textarea id="paymentTerms" placeholder="E.g. 50% upfront, 50% after delivery (optional)"></textarea>
  </div>

  <div class="section">
    <h2>Legal</h2>
    <textarea id="terminationClause" placeholder="Termination terms, cancellation period, etc."></textarea>
    <textarea id="jurisdiction" placeholder="This contract is governed by the laws of the Netherlands."></textarea>
  </div>

  <div class="section">
    <h2>Signature</h2>
    <input id="signatureName" placeholder="Your Name" />
    <input type="date" id="contractDate" />
  </div>

  <div class="btn-group">
    <button onclick="fillAI()">🤖 AI Fill</button>
    <button onclick="saveContract()">💾 Save</button>
    <button onclick="viewSavedContracts()">📂 Saved Contracts</button>
    <button onclick="downloadPDF()">📄 Print</button>
    <button onclick="downloadDOCX()">Download DOCX</button>
  </div>

  <div class="section">
    <h2>Preview</h2>
    <div id="contractPreview">Contract will appear here...</div>
  </div>

  <script>
    function generateContractText() {
      const today = new Date().toLocaleDateString();
      return `
FREELANCE CONTRACT

Date: ${document.getElementById('contractDate').value || today}
Business: ${businessName.value}
KvK: ${businessKvK.value}
VAT: ${businessVAT.value}
IBAN: ${businessIBAN.value}

Client: ${clientName.value}
Address: ${clientAddress.value}

Project:
${projectDescription.value}

Timeline:
${timeline.value}

Payment Terms:
${rate.value}
${paymentTerms.value}

Legal:
${terminationClause.value}
${jurisdiction.value}

Signature: ${signatureName.value}
      `.trim();
    }

    function updatePreview() {
      document.getElementById('contractPreview').textContent = generateContractText();
    }

    const fields = document.querySelectorAll("input, textarea");
    fields.forEach(f => f.addEventListener("input", updatePreview));

    function fillAI() {
      document.getElementById('projectDescription').value = "Develop a responsive website for the client's online store.";
      document.getElementById('timeline').value = "Week 1: Wireframe, Week 2: Development, Week 3: Testing & Launch";
      document.getElementById('paymentTerms').value = "50% upfront, 50% after delivery";
      document.getElementById('terminationClause').value = "Either party may terminate with 7 days written notice.";
      document.getElementById('jurisdiction').value = "This contract is governed by the laws of the Netherlands.";
      updatePreview();
    }

    function saveContract() {
      const saved = JSON.parse(localStorage.getItem("contracts") || "[]");
      saved.push(generateContractText());
      localStorage.setItem("contracts", JSON.stringify(saved));
      alert("✅ Contract saved!");
    }

    function viewSavedContracts() {
      const saved = JSON.parse(localStorage.getItem("contracts") || "[]");
      if (!saved.length) return alert("No saved contracts yet.");
      alert("Saved Contracts:\n\n" + saved.join("\n\n---\n\n"));
    }

    function downloadPDF() {
      const text = generateContractText();
      const win = window.open('', '', 'width=800,height=600');
      win.document.write(`<pre>${text}</pre>`);
      win.document.close();
      win.print();
    }

    function downloadDOCX() {
      const text = generateContractText();
      const blob = new Blob([text], { type: "application/msword" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = `SmartWerk-Freelance-Contract.doc`;
      link.click();
    }

    updatePreview();
  </script>
</body>
</html>
