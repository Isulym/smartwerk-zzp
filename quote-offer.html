<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartWerk — Quote / Offer</title>
  <link rel="stylesheet" href="style-quote-offer.css" />
</head>
<body>
  <div class="wrap">
    <header class="topbar">
      <a class="brand" href="templates.html">📄 SmartWerk Quote / Offer</a>
      <nav class="right">
        <a href="dashboard.html" class="btn">← Back to Dashboard</a>
      </nav>
    </header>

    <section class="intro">
      <h1>📄 Create a Quote / Offer <span class="info-icon" title="A quote is a professional offer sent to your client before an invoice. It shows what you plan to do and how much it will cost.">ℹ️</span></h1>
      <p class="muted">Use this tool to create a professional offer for your client before sending an invoice.</p>
      <p class="quote-valid">🗓️ Valid until: <span id="validUntil"></span></p>
    </section>

    <form id="quoteForm">
      <div class="form-section">
        <h2>🧾 Business Info</h2>
        <input type="text" id="businessName" placeholder="Your Business Name" required />
        <input type="text" id="businessKvK" placeholder="KvK Number (optional)" />
        <input type="text" id="businessVAT" placeholder="VAT Number (optional)" />
        <input type="text" id="businessIBAN" placeholder="IBAN (optional)" />
      </div>

      <div class="form-section">
        <h2>👤 Client Info</h2>
        <input type="text" id="clientName" placeholder="Client Name" required />
        <input type="text" id="clientEmail" placeholder="Client Email" />
      </div>

      <div class="form-section">
        <h2>📋 Services</h2>
        <table id="servicesTable">
          <thead>
            <tr><th>Description</th><th>Qty</th><th>Price</th><th>Total</th><th></th></tr>
          </thead>
          <tbody id="itemsContainer">
            <!-- Dynamic rows will be added here -->
          </tbody>
        </table>
        <button type="button" id="addItemBtn" class="btn ghost">+ Add Item</button>
      </div>

      <div class="form-section">
        <h2>🧮 Summary</h2>
        <p>Subtotal: €<span id="subtotal">0.00</span></p>
        <p>VAT (21%): €<span id="vat">0.00</span></p>
        <p><strong>Total: €<span id="total">0.00</span></strong></p>
        <p style="display:none;">Hidden Total for PDF: <span id="totalPrice">0.00</span></p>
      </div>

      <div class="form-section">
        <h2>📝 Note to Client</h2>
        <textarea id="noteToClient" placeholder="This quote is valid for 14 days... (optional)"></textarea>
      </div>

      <div class="form-section">
        <h2>✍️ Signature</h2>
        <input type="text" id="signatureName" placeholder="Your Name" required />
        <p>Quote Status:
          <select id="quoteStatus">
            <option value="draft">Draft</option>
            <option value="sent">Sent</option>
            <option value="accepted">Accepted</option>
          </select>
        </p>
      </div>

      <div class="actions">
        <button type="button" class="btn primary" id="saveBtn">Save</button>
        <button type="button" class="btn" id="generatePDFBtn">Export as PDF</button>
        <button type="button" class="btn ghost" id="aiDraftBtn">AI Draft</button>
      </div>
    </form>

    <footer class="foot-note">
      <p class="muted">Generated with SmartWerk — smartwerk.nl</p>
    </footer>
  </div>

  <!-- ✅ JavaScript: логіка кнопок -->
  <script type="module" src="quote-offer.js"></script>
  <script type="module" src="quote-offer-pdf.js"></script>
  <script>
    // Valid until (14 days ahead)
    const validUntil = new Date();
    validUntil.setDate(validUntil.getDate() + 14);
    document.getElementById("validUntil").textContent = validUntil.toLocaleDateString();
  </script>
</body>
</html>
