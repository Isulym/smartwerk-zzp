<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Invoice Template | SmartWerk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style-invoice-template.css" />
</head>
<body>
  <div class="wrap">
    <header class="topbar">
      <a class="brand" href="templates.html">üìÑ SmartWerk Quote / Offer</a>
      <nav class="left">
        <a href="dashboard.html" class="btn">‚Üê Back to Dashboard</a>
        <a href="templates.html" class="btn">‚Üê Back to Templates</a>
      </nav>
    </header>
    <section class="invoice">
      <h1>üßæ Invoice</h1>
      <div class="row space-between">
        <div>
          <h2>From</h2>
          <p>SmartWerk B.V.<br>
          KvK: 12345678<br>
          IBAN: NL91ABNA0417164300<br>
          VAT: NL001234567B01</p>
        </div>
        <div>
          <h2>To</h2>
          <p>Client Company<br>
          info@client.com<br>
          Amsterdam, Netherlands</p>
        </div>
      </div>

      <div class="row space-between info-bar">
        <div><strong>Invoice #</strong> INV-2025-001</div>
        <div><strong>Date</strong> 2025-09-01</div>
        <div><strong>Status</strong> Sent</div>
      </div>

      <table class="invoice-table">
        <thead>
          <tr>
            <th>Description</th>
            <th>Qty</th>
            <th>Unit Price</th>
            <th>VAT</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Web design & development</td>
            <td>1</td>
            <td>‚Ç¨1,200.00</td>
            <td>21%</td>
            <td>‚Ç¨1,452.00</td>
          </tr>
          <tr>
            <td>Consultation</td>
            <td>3</td>
            <td>‚Ç¨100.00</td>
            <td>21%</td>
            <td>‚Ç¨363.00</td>
          </tr>
        </tbody>
      </table>

      <div class="totals">
        <p><strong>Subtotal:</strong> ‚Ç¨1,500.00</p>
        <p><strong>VAT (21%):</strong> ‚Ç¨315.00</p>
        <p><strong>Total:</strong> ‚Ç¨1,815.00</p>
      </div>

      <div class="signatures">
        <div class="sig-box">
          <p><strong>Business Signature:</strong></p>
          <canvas id="sigBusiness" width="220" height="80"></canvas>
          <p class="sig-date">Signed: 2025-09-01</p>
        </div>
        <div class="sig-box">
          <p><strong>Client Signature:</strong></p>
          <canvas id="sigClient" width="220" height="80"></canvas>
          <p class="sig-date">Signed: 2025-09-01</p>
        </div>
      </div>
    </section>
  </div>

  <!-- PDF export + Signatures -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <script>
    const { jsPDF } = window.jspdf;

    document.getElementById("generatePDFBtn").addEventListener("click", () => {
      const doc = new jsPDF();
      const margin = 20;
      let y = margin;

      doc.setFont('helvetica', 'bold');
      doc.setFontSize(18);
      doc.text("SmartWerk Invoice", margin, y);
      y += 10;

      doc.setFontSize(11);
      doc.setFont('helvetica', 'normal');
      doc.text("From:\nSmartWerk B.V.\nKvK: 12345678\nIBAN: NL91ABNA0417164300\nVAT: NL001234567B01", margin, y);
      doc.text("To:\nClient Company\ninfo@client.com\nAmsterdam, Netherlands", 110, y);
      y += 40;

      doc.setFontSize(10);
      doc.text(`Invoice #: INV-2025-001`, margin, y);
      doc.text(`Date: 2025-09-01`, margin + 60, y);
      doc.text(`Status: Sent`, margin + 120, y);
      y += 10;

      doc.autoTable({
        startY: y + 4,
        head: [['Description', 'Qty', 'Unit Price', 'VAT', 'Total']],
        body: [
          ['Web design & development', '1', '‚Ç¨1,200.00', '21%', '‚Ç¨1,452.00'],
          ['Consultation', '3', '‚Ç¨100.00', '21%', '‚Ç¨363.00']
        ],
        theme: 'grid',
        styles: { fontSize: 10 },
        headStyles: { fillColor: [59, 121, 255] },
      });

      let finalY = doc.lastAutoTable.finalY + 10;
      doc.setFontSize(11);
      doc.text(`Subtotal: ‚Ç¨1,500.00`, 140, finalY);
      doc.text(`VAT (21%): ‚Ç¨315.00`, 140, finalY + 7);
      doc.text(`Total: ‚Ç¨1,815.00`, 140, finalY + 14);

      // Signatures (canvas to image)
      const sigBusiness = document.getElementById("sigBusiness");
      const sigClient = document.getElementById("sigClient");

      if (sigBusiness && sigClient) {
        finalY += 30;
        doc.text("Business Signature:", margin, finalY);
        doc.addImage(sigBusiness.toDataURL("image/png"), "PNG", margin, finalY + 5, 50, 20);
        doc.text("Client Signature:", 120, finalY);
        doc.addImage(sigClient.toDataURL("image/png"), "PNG", 120, finalY + 5, 50, 20);
        doc.setFontSize(9);
        doc.text("Signed: 2025-09-01", margin, finalY + 30);
        doc.text("Signed: 2025-09-01", 120, finalY + 30);
      }

      doc.save("SmartWerk_Invoice_Template.pdf");
    });
  </script>
</body>
</html>
